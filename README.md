# lottie-player


基于bodymovin-parser的属性动画播放解决方案

## 为什么要开发这个工程
-   After Effect是知名的后期动效开发软件，基于AE的UI开发可以为web端带来丰富的动画效果和视觉展现，成为UI设计重要的组成部分。那么基于AE的动画展现就成为前端开发的重大难题。

-   Bodymovin是实现AE动效转为json格式文件的一种插件，将动画以JSON的形式进行导出，从而为动效在前端侧实现铺平了数据道路。我们可以基于
lottie库完成对web侧的渲染，也可以基于渲染引擎完成对移动web的渲染。但是都存在一些问题：
    -  库体积太大，lottie.js有500多kb，渲染引擎例如pixi.js也有近500kb的体积。这些库在诸如小程序等对体积加以限制的平台下，
会占据很多的空间。因此需要更轻量化的方案实现动效的解析和渲染。

    -  对于营销活动的动画开发有以下几个特点：
        - 1. 复杂度不高，容易实现
        - 2. 需要快速上线和交付
        - 3. 需要更低的开发成本
        - 4. 能够快速查看动画效果
    
        基于以上的特点，需要一种动效方案来快速实现业务开发。

## 新工程的优势

-  lerna工程化——使代码管理更加方便，
-  代码更轻量——基于rollup打包和代码结构拆分，使得能够实现快速植入。
-  解析器和代码生成分离——让开发者基于解析器实现跨平台代码生成
-  组件化-只需要json资源、剩下的交给组件完成实现。

## 现支持能力

基于图层的帧动画渲染，包括以下几部分。

- 核心库解析，生成通用解析树
- 基于解析树生成html、css代码
- 支持react的动效渲染组件
- 支持taro的动效渲染组件

## 调试入口

```shell

// 进入web调试工程
cd example/web
// 启动页面
npm run start
// 启动文件处理服务
npm run server

// 打开页面
http://localhost:3000/

```


## 整体架构

![架构图](https://p1.meituan.net/travelcube/1edf60e0a47e35c36d33c6ece1070aae169327.png)
