!function(){"use strict";var t=(e.prototype.buildAssets=function(){var t=this.assetsSource,e=t.id,r=t.w,i=t.h,n=t.u,t=t.p;this.type="node",this.id=e,this.width=r,this.height=i,this.path=this.buildUrlPath(n,t)},e.prototype.buildUrlPath=function(t,e){return/base64/.test(e)?e:t?""+t+e:void 0},e);function e(t){this.assetsSource=t,this.buildAssets()}var n=function(){return(n=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function r(t,e){switch(t){case"o":return s=(o=e).a,o=o.k,!s&&"number"==typeof o;case"r":return a=(n=e).a,n=n.k,!a&&"number"==typeof n;case"p":return n=(a=e).a,a=a.k,!n&&Array.isArray(a);case"a":return i=(r=e).a,r=r.k,!i&&Array.isArray(r);case"s":return r=(i=e).a,i=i.k,!r&&Array.isArray(i)}var r,i,n,a,o,s}var c=4,l=.001,y=1e-7,f=10,h=11,b=1/(h-1),a="function"==typeof Float32Array;function i(t,e){return 1-3*e+3*t}function o(t,e){return 3*e-6*t}function p(t,e,r){return((i(e,r)*t+o(e,r))*t+3*e)*t}function d(t,e,r){return 3*i(e,r)*t*t+2*o(e,r)*t+3*e}function m(t){return t}function s(o,e,s,r){if(!(0<=o&&o<=1&&0<=s&&s<=1))throw new Error("bezier x values must be in [0, 1] range");if(o===e&&s===r)return m;for(var u=new(a?Float32Array:Array)(h),t=0;t<h;++t)u[t]=p(t*b,o,s);function i(t){for(var e=0,r=1,i=h-1;r!==i&&u[r]<=t;++r)e+=b;var n=e+(t-u[--r])/(u[r+1]-u[r])*b,a=d(n,o,s);return l<=a?function(t,e,r,i){for(var n=0;n<c;++n){var a=d(e,r,i);if(0===a)return e;e-=(p(e,r,i)-t)/a}return e}(t,n,o,s):0===a?n:function(t,e,r,i,n){for(var a,o,s=0;0<(a=p(o=e+(r-e)/2,i,n)-t)?r=o:e=o,Math.abs(a)>y&&++s<f;);return o}(t,e,e+b,o,s)}return function(t){return 0===t?0:1===t?1:p(i(t),e,r)}}function u(t,e){switch(t){case"o":return function(t){if(t.i&&t.o&&"object"==typeof t.o.x&&"object"==typeof t.i.x)return s(t.o.x[0],t.o.y[0],t.i.x[0],t.i.y[0])}(e);case"r":return function(t){if(t.i&&t.o&&"object"==typeof t.o.x&&"object"==typeof t.i.x)return s(t.o.x[0],t.o.y[0],t.i.x[0],t.i.y[0])}(e);case"p":return(r=e).o&&r.i?Array.isArray(r.o.x)&&Array.isArray(r.o.y)?s(r.o.x[0],r.o.y[0],r.i.x[0],r.i.y[0]):s(r.o.x,r.o.y,r.i.x,r.i.y):null;case"s":return function(t){if(t.i&&t.o&&"object"==typeof t.o.x&&"object"==typeof t.i.x)return s(t.o.x[0],t.o.y[0],t.i.x[0],t.i.y[0])}(e)}var r}function x(t){if(t.i&&t.o){var e=t.i,r=e.x,i=e.y,e=t.o,t=e.x,e=e.y;return Array.isArray(r)?"cube-bezier("+r[0]+", "+t[0]+", "+i[0]+", "+e[0]+")":"cube-bezier("+r+", "+t+", "+i+", "+e+")"}}var A=(v.prototype.buildOpacity=function(t){var e=t.layer,r=t.nextlayer,i=e.t,n=e.s,t=r||e,r=t.t,t=t.s;this.startTime=i,this.endTime=r,this.duration=r-i,this.startVal=this.getOpacity(n),this.endVal=this.getOpacity(t),this.bezierFn=u("o",e),this.bezierStr=x(e)},v.prototype.getOpacity=function(t){return Array.isArray(t)?Number(t[0]/100):Number(t/100)},v);function v(t){var e=t.layer,t=t.nextlayer;this.buildOpacity({layer:e,nextlayer:t})}var g=(S.prototype.buildRotate=function(t){var e=t.layer,r=t.nextlayer,i=e.t,n=e.s,t=r||e,r=t.t,t=t.s;this.startTime=i,this.endTime=r,this.duration=r-i,this.startVal=this.getRotate(n),this.endVal=this.getRotate(t),this.bezierFn=u("r",e),this.bezierStr=x(e)},S.prototype.getRotate=function(t){return Array.isArray(t)?Number(t[0]):Number(t)},S);function S(t){var e=t.layer,t=t.nextlayer;this.buildRotate({layer:e,nextlayer:t})}var k=(F.prototype.buildScale=function(t){var e=t.layer,r=t.nextlayer,i=e.t,n=e.s,t=r||e,r=t.t,t=t.s;this.startTime=i,this.endTime=r,this.duration=r-i,this.startVal=this.getScale(n),this.endVal=this.getScale(t),this.bezierFn=u("s",e),this.bezierStr=x(e)},F.prototype.getScale=function(t){if(Array.isArray(t))return[Number(t[0]/100),Number(t[1]/100),Number(t[2]/100)]},F);function F(t){var e=t.layer,t=t.nextlayer;this.buildScale({layer:e,nextlayer:t})}function V(t){var r=t.layer,t=t.frames,i=[];return r.forEach(function(t,e){i.push(new A({layer:t,nextlayer:e!==r.length-1?r[e+1]:null}))}),function(t,s){for(var u={},c=s.length,e=0;e<t;e++)!function(e){var t,r,i,n,a,o=s.filter(function(t){return t.startTime<=e&&t.endTime>e});o.length?(t=(n=o[0]).startTime,a=n.duration,r=n.startVal,i=n.endVal,o=n.bezierFn,n=n.bezierStr,a=Number(((e-t)/a).toFixed(2)),o?(o=o(a),u[e]={index:e,opacity:(i-r)*o+r,ease:n}):u[e]={index:e,opacity:(i-r)*a+r}):u[e]=0==e?{index:e,opacity:s[0].startVal}:{index:e,opacity:s[c-1].startVal}}(e);return u}(t,i)}function z(t){var r=t.layer,t=t.frames,i=[];return r.forEach(function(t,e){i.push(new g({layer:t,nextlayer:e!==r.length-1?r[e+1]:null}))}),function(t,s){for(var u={},c=s.length,e=0;e<t;e++)!function(e){var t,r,i,n,a,o=s.filter(function(t){return t.startTime<=e&&t.endTime>e});o.length?(t=(n=o[0]).startTime,a=n.duration,r=n.startVal,i=n.endVal,o=n.bezierFn,n=n.bezierStr,a=Number(((e-t)/a).toFixed(2)),o?(o=o(a),u[e]={index:e,rotate:(i-r)*o+r,ease:n}):u[e]={index:e,rotate:(i-r)*a+r}):u[e]=0==e?{index:e,rotate:s[0].startVal}:{index:e,rotate:s[c-1].startVal}}(e);return u}(t,i)}function N(t){var r=t.layer,t=t.frames,i=[];return r.forEach(function(t,e){i.push(new k({layer:t,nextlayer:e!==r.length-1?r[e+1]:null}))}),function(t,f){for(var h={},b=f.length,e=0;e<t;e++)!function(e){var t,r,i,n,a,o,s,u,c,l,y=f.filter(function(t){return t.startTime<=e&&t.endTime>e});y.length?(a=(n=y[0]).startTime,o=n.duration,t=n.startVal,s=n.endVal,r=n.bezierFn,i=n.bezierStr,n=r(y=Number(((e-a)/o).toFixed(2))),a=s[0]-t[0],o=s[1]-t[1],s=s[2]-t[2],r?(u=a*n+t[0],c=o*n+t[1],l=s*n+t[2],h[e]={index:e,scale:[u,c,l],ease:i}):(u=a*y+t[0],c=o*y+t[1],l=s*y+t[2],h[e]={index:e,scale:[u,c,l]})):h[e]=0==e?{index:e,scale:f[0].startVal}:{index:e,scale:f[b-1].startVal}}(e);return h}(t,i)}var T=(O.prototype.buildBaseInfo=function(t){var e=t.ind,t=t.refId;this.index=e,this.id=t,this.attributes={},this.animeFrames=[]},O.prototype.buildAnimeLayer=function(t){var r=this,i=t.ks;Object.keys(i).forEach(function(t){var e=i[t];r.buildMetricAnime(t,e)})},O.prototype.buildMetricAnime=function(t,e){switch(t){case"o":this.buildOpacityAnime(e);break;case"r":this.buildRotateAnime(e);break;case"p":this.buildPositionAnime(e);break;case"a":this.buildAnchorAnime(e);break;case"s":this.buildScaleAnime(e)}},O.prototype.buildOpacityAnime=function(t){r("o",t)?this.attributes.opacity=this.getOpacityStyle(t.k):(t=V({layer:t.k,frames:this.frames}),this.buildAnimeFrames(t))},O.prototype.buildRotateAnime=function(t){r("r",t)?this.attributes.rotate=this.getRotateStyle(t.k):(t=z({layer:t.k,frames:this.frames}),this.buildAnimeFrames(t))},O.prototype.buildPositionAnime=function(t){r("p",t)&&(this.attributes.position=this.getPositionStyle(t.k))},O.prototype.buildAnchorAnime=function(t){r("a",t)&&(this.attributes.anchor=this.getAnchorStyle(t.k))},O.prototype.buildScaleAnime=function(t){r("s",t)?this.attributes.scale=this.getScaleStyle(t.k):(t=N({layer:t.k,frames:this.frames}),this.buildAnimeFrames(t))},O.prototype.getOpacityStyle=function(t){return Number(t/100)},O.prototype.getRotateStyle=function(t){return Number(t)},O.prototype.getPositionStyle=function(t){return[t[0],t[1],t[2]]},O.prototype.getAnchorStyle=function(t){return[t[0],t[1],t[2]]},O.prototype.getScaleStyle=function(t){return{x:Number(t[0]/100),y:Number(t[1]/100),z:Number(t[2]/100)}},O.prototype.getId=function(){return this.id},O.prototype.buildAnimeFrames=function(r){var i=this;Object.keys(r).forEach(function(t){var e=i.animeFrames[t]||{};i.animeFrames[t]=n(n({},e),r[t])})},O);function O(t){var e=t.layer,t=t.frames;this.frames=t,this.buildBaseInfo(e),this.buildAnimeLayer(e)}}();
